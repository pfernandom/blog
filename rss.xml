<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Your Site's RSS Feed]]></title><description><![CDATA[A blog about many things, all tech and software related.]]></description><link>https://pedromarquez.dev</link><generator>GatsbyJS</generator><lastBuildDate>Tue, 26 Nov 2019 22:37:19 GMT</lastBuildDate><item><title><![CDATA[What happens when you click on the browser's "back" button?]]></title><description><![CDATA[The “back” button in a browser is one of those things that seem so simple no one really puts a lot of thought on it. After all, the concept…]]></description><link>https://pedromarquez.dev/2019/</link><guid isPermaLink="false">https://pedromarquez.dev/2019/</guid><pubDate>Fri, 16 Aug 2019 12:00:03 GMT</pubDate><content:encoded>&lt;p&gt;The “back” button in a browser is one of those things that seem so simple no one really puts a lot of thought on it. After all, the concept behind it it’s really simple: You navigate to the previous page you were before. If there is no previous page, the button can’t be clicked. Simple, right?&lt;/p&gt;
&lt;p&gt;Fo you know for sure what “going back” actually involves? Do you look at a cached version of your page? Does it re-render as if you were navigating to it for the first time? What about network requests?
These questions might have simple answers when web sites were mostly HTML and CSS, but as we have added more complexity to our web apps with JavaScript and frameworks, the answers are less clear today.&lt;/p&gt;
&lt;p&gt;In this post I’ll try to shed some light on what happens to our web apps when we click on the back button.&lt;/p&gt;
&lt;h2&gt;Static HTML&lt;/h2&gt;
&lt;p&gt;Let’s start from the simplest case. What happens to a static web page when the user hits the back button?&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Weird behavior for matrix created with Array.fill()]]></title><description><![CDATA[I was using JavaScript for completing some Leetcode challenges and I got some pretty weird behavior. I tried to create a matrix (a two…]]></description><link>https://pedromarquez.dev/2019/7/array-fill/</link><guid isPermaLink="false">https://pedromarquez.dev/2019/7/array-fill/</guid><pubDate>Thu, 04 Jul 2019 12:00:03 GMT</pubDate><content:encoded>&lt;p&gt;I was using JavaScript for completing some Leetcode challenges and I got some pretty weird behavior.&lt;/p&gt;
&lt;p&gt;I tried to create a matrix (a two-dimension array, or array of arrays), initialize it with &lt;code class=&quot;language-text&quot;&gt;false&lt;/code&gt; and then use it in some backtracking problem. I did something like this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token comment&quot;&gt;// Initialize a 3x4 matrix with &quot;false&quot; values.&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; matrix &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// some stringify to capture the actual values at this point of the execution&lt;/span&gt;
console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;matrix&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;token comment&quot;&gt;// set middle value to true&lt;/span&gt;
matrix&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;

console&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;JSON&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;stringify&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;matrix&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And my console prints this:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
 &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
 &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;

&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
 &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;
 &lt;span class=&quot;token punctuation&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;]&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Wait, what? If I only set the value at 1,1 to &lt;strong&gt;true&lt;/strong&gt;, why am I getting changed values in the whole column?&lt;/p&gt;
&lt;p&gt;Well, this is because the parameter passed to &lt;code class=&quot;language-text&quot;&gt;Array.fill()&lt;/code&gt; is not really a callback. It only gets evaluated once, and its used for filling all the elements in the array.&lt;/p&gt;
&lt;p&gt;So, in this case, we have only two arrays. The array &lt;code class=&quot;language-text&quot;&gt;A&lt;/code&gt; (&lt;code class=&quot;language-text&quot;&gt;Array(3)&lt;/code&gt;), which has 3 elements, and array &lt;code class=&quot;language-text&quot;&gt;B&lt;/code&gt; (&lt;code class=&quot;language-text&quot;&gt;Array(4)&lt;/code&gt;) which has 4 elements. &lt;/p&gt;
&lt;p&gt;&lt;code class=&quot;language-text&quot;&gt;Array(4)&lt;/code&gt; creates array &lt;code class=&quot;language-text&quot;&gt;B&lt;/code&gt;, and &lt;code class=&quot;language-text&quot;&gt;B&lt;/code&gt; is passed as parameter to the &lt;code class=&quot;language-text&quot;&gt;Array(3).fill(B)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;To be clearer, this is what we are actually doing, broken into more steps:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;B&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;A&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token constant&quot;&gt;B&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; matrix &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token constant&quot;&gt;A&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As we can see, we’re filling &lt;code class=&quot;language-text&quot;&gt;A&lt;/code&gt; with the same reference of &lt;code class=&quot;language-text&quot;&gt;B&lt;/code&gt;, three times. Any changes to &lt;code class=&quot;language-text&quot;&gt;B&lt;/code&gt; will be reflected in each element of &lt;code class=&quot;language-text&quot;&gt;A&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;How do we fix it?&lt;/h3&gt;
&lt;p&gt;Try this instead:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;javascript&quot;&gt;&lt;pre class=&quot;language-javascript&quot;&gt;&lt;code class=&quot;language-javascript&quot;&gt;&lt;span class=&quot;token keyword&quot;&gt;const&lt;/span&gt; matrix &lt;span class=&quot;token operator&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;3&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;map&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token parameter&quot;&gt;el&lt;/span&gt; &lt;span class=&quot;token operator&quot;&gt;=&gt;&lt;/span&gt; &lt;span class=&quot;token function&quot;&gt;Array&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token number&quot;&gt;4&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;token function&quot;&gt;fill&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;token boolean&quot;&gt;false&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;token punctuation&quot;&gt;;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This will create array &lt;code class=&quot;language-text&quot;&gt;A&lt;/code&gt;, and then use the &lt;code class=&quot;language-text&quot;&gt;map&lt;/code&gt; function to call &lt;code class=&quot;language-text&quot;&gt;Array(4).fill(false)&lt;/code&gt; once per each element of &lt;code class=&quot;language-text&quot;&gt;A&lt;/code&gt;, generating new arrays for each one.&lt;/p&gt;
&lt;p&gt;Looking back at why the problem happened, it seems pretty obvious. However, when I was puzzled when it first happened, and I couldn’t find any example of anyone else doing the same.&lt;/p&gt;
&lt;p&gt;Hope this helps other people.&lt;/p&gt;
&lt;p&gt;PS. Happy birthday, USA!&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Streaming HTML responses]]></title><description><![CDATA[An Express server showcasing how HTML Chunking behaves, including blocking resources for Critical Rendering Path Why? I’ve read from…]]></description><link>https://pedromarquez.dev/2019/6/html-chunking/</link><guid isPermaLink="false">https://pedromarquez.dev/2019/6/html-chunking/</guid><pubDate>Fri, 21 Jun 2019 22:12:03 GMT</pubDate><content:encoded>&lt;p&gt;An Express server showcasing how HTML Chunking behaves, including blocking resources for Critical Rendering Path&lt;/p&gt;
&lt;h2&gt;Why?&lt;/h2&gt;
&lt;p&gt;I’ve read from multiple sources about HTML streaming (chunking) as a way to increase perceived page load performance, but it was very difficult for me to visualize it without an example.&lt;/p&gt;
&lt;p&gt;Most examples I’ve seen don’t exactly show what happens if one chunk takes considerably more time to be streamed than the previous, or what happens with multiple chunks with varying latencies.&lt;/p&gt;
&lt;h3&gt;Critical rendering Path&lt;/h3&gt;
&lt;p&gt;Another thing that was difficult to visualize to me were concepts like “blocking resources” like CSS and JS files; especially because HTML can be rendered in chunks one would think that CSS and JS can be chunked too.&lt;/p&gt;
&lt;p&gt;This project adds blocking CSS and JS scripts which finish loading after a timeout, specifically to verify what happens when we also stream blocking resources (&lt;em&gt;spoiler alert, they still block rendering of the HTML&lt;/em&gt;)&lt;/p&gt;
&lt;h2&gt;How&lt;/h2&gt;
&lt;p&gt;Node’s Express allows writing chunks into a response stream using &lt;a href=&quot;https://nodejs.org/api/stream.html#stream_writable_write_chunk_encoding_callback&quot;&gt;Node streams&lt;/a&gt;, via its &lt;code class=&quot;language-text&quot;&gt;response.write(chunk)&lt;/code&gt; method.&lt;/p&gt;
&lt;p&gt;Using that method, we can simulate streaming multiple chunks with different latencies: &lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;app.get(&amp;#39;/&amp;#39;, function (req, res) {
  res.write(&amp;#39;&amp;lt;html&amp;gt;&amp;#39;);
  res.write(&amp;#39;&amp;lt;h1 class=&amp;quot;my-text&amp;quot;&amp;gt;Hello&amp;lt;/h1&amp;gt;&amp;#39;);
  
  setTimeout(function() {
    res.write(&amp;quot;&amp;lt;div&amp;gt;I took too long to load, like 5 seconds!&amp;lt;/div&amp;gt;&amp;quot;);
    res.write(&amp;#39;&amp;lt;/html&amp;gt;&amp;#39;);
    res.end();
  }, 5000);
});&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Here, we stream first the openning tag &lt;code class=&quot;language-text&quot;&gt;&amp;lt;html&amp;gt;&lt;/code&gt; and the &lt;code class=&quot;language-text&quot;&gt;&amp;lt;h1&amp;gt;&lt;/code&gt; tag, then we wait for 5 seconds and we stream the rest of the document.&lt;/p&gt;
&lt;p&gt;In a real-world application, instead of a timeout we can do some costly operation like querying a DB. The browser will render the &lt;code class=&quot;language-text&quot;&gt;&amp;lt;h1&amp;gt;&lt;/code&gt; element and as more chunks are streamed, more parts of the page will be rendered.
In this way, we can get content to the user as fast as possible, without having to wait for those costly operations to finish before even sending the first byte of response.&lt;/p&gt;
&lt;h3&gt;Scripts and stylesheets&lt;/h3&gt;
&lt;p&gt;Using the same chunking technique, we can return JS and CSS files:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;app.get(&amp;#39;/styles.css&amp;#39;, function (req, res) {
  res.write(&amp;#39;h1 { background-color:blue; }&amp;#39;);
  res.write(&amp;#39;.my-text { background-color:yellow; }&amp;#39;);
  setTimeout(function() {
    res.write(&amp;quot; body { background-color: grey; }&amp;quot;);
    res.end();
  }, 4000);
});

app.get(&amp;#39;/script.js&amp;#39;, function (req, res) {
  res.write(&amp;#39;console.log(&amp;quot;hello&amp;quot;);&amp;#39;);
  setTimeout(function() {
    res.write(&amp;#39;console.log(&amp;quot;world&amp;quot;);&amp;#39;);
    res.end();
  }, 4000);
});&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Unlike the chunked HTML, the browser will not execute/render each chunk as it gets it. It has to wait for the whole file to finish loading before it can continuing rendering the HTML which is declared after these &lt;code class=&quot;language-text&quot;&gt;&amp;lt;link&amp;gt;&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;&amp;lt;script&amp;gt;&lt;/code&gt; tags. So, even if we stream these resources, they will still block rendering.
For example, once the browser gets to the &lt;code class=&quot;language-text&quot;&gt;&amp;lt;script&amp;gt;&lt;/code&gt; tag for the &lt;code class=&quot;language-text&quot;&gt;script.js&lt;/code&gt; file we defined above, both &lt;code class=&quot;language-text&quot;&gt;hello&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;world&lt;/code&gt; will be printed in console at the same time, after the 4 seconds delay.&lt;/p&gt;
&lt;p&gt;Why is the browser not processing these files as they get streamed? This is out of the scope of this text, but from a high point of view is because &lt;strong&gt;the browser cannot correctly calculate styles or execute scripts without knowing the whole content of the file&lt;/strong&gt;.
Take as an example a JavaScript file. Thanks to &lt;a href=&quot;https://www.w3schools.com/js/js_hoisting.asp&quot;&gt;hoisting&lt;/a&gt;, declarations of JavaScript functions can be bellow their invocations:&lt;/p&gt;
&lt;div class=&quot;gatsby-highlight&quot; data-language=&quot;text&quot;&gt;&lt;pre class=&quot;language-text&quot;&gt;&lt;code class=&quot;language-text&quot;&gt;main();

function main(){
  console.log(&amp;#39;Go main!&amp;#39;);
}&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;So, even if the browser browser is able to read the first line with &lt;code class=&quot;language-text&quot;&gt;main()&lt;/code&gt;, how would it know what to execute if it doesn’t have the function declaration yet?.&lt;/p&gt;
&lt;h3&gt;Fixing blocking resources&lt;/h3&gt;
&lt;p&gt;There are multiple ways to remove blocking CSS and JS, like inlining critical CSS and JS. It won’t change the blocking behavior of the &lt;code class=&quot;language-text&quot;&gt;&amp;lt;script&amp;gt;&lt;/code&gt; and &lt;code class=&quot;language-text&quot;&gt;&amp;lt;link&amp;gt;&lt;/code&gt; tags, but it will reduce the overhead of extra network requests and (hopefully) it will be smaller in content than the full, non-critical resources.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;https://developers.google.com/speed/docs/insights/BlockingJS&quot;&gt;https://developers.google.com/speed/docs/insights/BlockingJS&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Demo&lt;/h2&gt;
&lt;p&gt;&lt;img src=&quot;/54c282e15daa4dcc94ef0eb9821ef2fb/demo.gif&quot; alt=&quot;Gif showing the server running&quot;&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Fatherhood in Silicon Valley]]></title><description><![CDATA[Having a baby is daunting.  Personal Time Off Taking time out of work is a polarizing topic for Silicon Valley: Either you should at least…]]></description><link>https://pedromarquez.dev/2019/4/fatherhood/</link><guid isPermaLink="false">https://pedromarquez.dev/2019/4/fatherhood/</guid><pubDate>Mon, 01 Apr 2019 22:12:03 GMT</pubDate><content:encoded>&lt;p&gt;Having a baby is daunting. &lt;/p&gt;
&lt;h2&gt;Personal Time Off&lt;/h2&gt;
&lt;p&gt;Taking time out of work is a &lt;a href=&quot;https://bit.ly/2I5cCUj&quot;&gt;polarizing topic&lt;/a&gt; for Silicon Valley: Either you should at least be &lt;a href=&quot;https://cnb.cx/2JZcnfW&quot;&gt;working 25 hours a day&lt;/a&gt; to be a successful entrepreneur, &lt;a href=&quot;https://bit.ly/2CMNApu&quot;&gt;working while your competition sleeps&lt;/a&gt;, and spending your weekends building side projects; or you should completely disconnect from Internet, never writing a single line of code outside of work hours.&lt;/p&gt;
&lt;p&gt;For a while, I was convinced that you could get a balanced schedule. A year ago, it wasn’t difficult to find time to code while also finding a moment to play video games with my older son, or taking my wife out for dinner.&lt;br&gt;
That changed when the new baby arrived.&lt;/p&gt;
&lt;p&gt;I’m very thankful of working at LinkedIn, where you get a lot of time for paternity leave; a benefit &lt;a href=&quot;https://bit.ly/2FQtqNa&quot;&gt;unavailable to more than 30 million workers in the USA&lt;/a&gt; and that people who do have it don’t tend to fully appreciate it.&lt;/p&gt;
&lt;p&gt;During my weeks off, I was horrified of going back to work and being so rusty that I would be left behind in my project. In between diaper changes, I felt the urge of writing code, or just looking at Stack to see what was happening back at the office.&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/beee3f84329f1fdaa707c561e3ac5d01/49286/baby.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAMBBAX/xAAVAQEBAAAAAAAAAAAAAAAAAAABAP/aAAwDAQACEAMQAAAByGV3iEDf/8QAGhABAQACAwAAAAAAAAAAAAAAAgEAAxESIf/aAAgBAQABBQJe3ouUabk2rFbF/8QAFhEBAQEAAAAAAAAAAAAAAAAAABES/9oACAEDAQE/Aa0//8QAFREBAQAAAAAAAAAAAAAAAAAAABL/2gAIAQIBAT8BS//EABYQAQEBAAAAAAAAAAAAAAAAABARAf/aAAgBAQAGPwLCEP/EABsQAQADAAMBAAAAAAAAAAAAAAEAESExQWFx/9oACAEBAAE/Idw+QQgXfZxNCGWw9Js9jjWf/9oADAMBAAIAAwAAABC8P//EABcRAQEBAQAAAAAAAAAAAAAAAAEAESH/2gAIAQMBAT8QUdjRt//EABgRAQEAAwAAAAAAAAAAAAAAAAEAESEx/9oACAECAQE/EAHVgdb/xAAaEAEBAQADAQAAAAAAAAAAAAABEQAhMUGR/9oACAEBAAE/EOQy8qsxzqwS/WYJB6Ol73pQkgQX7gE5m97/2Q==&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Depicted: A baby with a computer, but not mine&quot;
        title=&quot;&quot;
        src=&quot;/static/beee3f84329f1fdaa707c561e3ac5d01/c739e/baby.jpg&quot;
        srcset=&quot;/static/beee3f84329f1fdaa707c561e3ac5d01/8ee9c/baby.jpg 148w,
/static/beee3f84329f1fdaa707c561e3ac5d01/ebbe7/baby.jpg 295w,
/static/beee3f84329f1fdaa707c561e3ac5d01/c739e/baby.jpg 590w,
/static/beee3f84329f1fdaa707c561e3ac5d01/5413e/baby.jpg 885w,
/static/beee3f84329f1fdaa707c561e3ac5d01/4efde/baby.jpg 1180w,
/static/beee3f84329f1fdaa707c561e3ac5d01/49286/baby.jpg 5472w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p&gt;Thankfully, with my wife’s help (and a good dose of self-control and many, many nights without sleeping), I fully disconnected and used my time to take care of my family.&lt;br&gt;
And while I wasn’t sure at the time, looking back not only I don’t regret that decision but I’m more convinced today that I shouldn’t have worried about work.&lt;/p&gt;
&lt;p&gt;One thing needs to be clear: As valuable as the time you spend coding is, you can always do it later. Feeding your newborn baby is something that, if it goes away, it will never come back.&lt;/p&gt;
&lt;h2&gt;New time schedule&lt;/h2&gt;
&lt;p&gt;After weeks of not knowing when I would be able to sleep through a whole night again (&lt;em&gt;spoiler alert: not soon enough&lt;/em&gt;) the time I used to have for any personal activities got reduced to minutes in a week.&lt;/p&gt;
&lt;p&gt;The first thing to go was the time I dedicated to my weekend projects and blog writing. I chose things like playing a video game once in a while, or watching a movie over the &lt;em&gt;side hustle&lt;/em&gt; for a very simple reason: Avoiding burnout.&lt;/p&gt;
&lt;p&gt;
  &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4361d86fd70736f79724c12206de33ef/125ef/burnout.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
  
  &lt;span
    class=&quot;gatsby-resp-image-wrapper&quot;
    style=&quot;position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;&quot;
  &gt;
    &lt;span
      class=&quot;gatsby-resp-image-background-image&quot;
      style=&quot;padding-bottom: 56.25%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIDBP/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAABW+RMuUkN/8QAGRAAAwEBAQAAAAAAAAAAAAAAAQIDADEz/9oACAEBAAEFAosdSrKXdi0vJyce/wD/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAaEAAABwAAAAAAAAAAAAAAAAAAAQIRICFB/9oACAEBAAY/AsFIco//xAAbEAEAAgIDAAAAAAAAAAAAAAABAEEhMRFRYf/aAAgBAQABPyG1rfcwy8GJFEgwbnG3Gx//2gAMAwEAAgADAAAAEK8v/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Qp//EABsQAQADAQADAAAAAAAAAAAAAAEAETEhQXGx/9oACAEBAAE/EGBSlKHH2hgQG4RbkuHiA19bALvlfIpKz//Z&apos;); background-size: cover; display: block;&quot;
    &gt;
      &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        style=&quot;width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;&quot;
        alt=&quot;Depicted: Burnout, but of a car. Stock pictures of stressed people are sad&quot;
        title=&quot;&quot;
        src=&quot;/static/4361d86fd70736f79724c12206de33ef/c739e/burnout.jpg&quot;
        srcset=&quot;/static/4361d86fd70736f79724c12206de33ef/8ee9c/burnout.jpg 148w,
/static/4361d86fd70736f79724c12206de33ef/ebbe7/burnout.jpg 295w,
/static/4361d86fd70736f79724c12206de33ef/c739e/burnout.jpg 590w,
/static/4361d86fd70736f79724c12206de33ef/5413e/burnout.jpg 885w,
/static/4361d86fd70736f79724c12206de33ef/4efde/burnout.jpg 1180w,
/static/4361d86fd70736f79724c12206de33ef/125ef/burnout.jpg 3840w&quot;
        sizes=&quot;(max-width: 590px) 100vw, 590px&quot;
      /&gt;
    &lt;/span&gt;
  &lt;/span&gt;
  
  &lt;/a&gt;
    &lt;/p&gt;
&lt;p style=&quot;text-align: center;&quot;&gt;
  *Not that kind of burnout*
&lt;/p&gt;
Even when it&apos;s my own personal code, it&apos;s still code. And while I love to write code every day, my brain needed a break once in a while.
&lt;p&gt;As time passes, I learn to better manage my time and I start to do more things, like writing this blog.  &lt;/p&gt;
&lt;p&gt;After so much people told me that I wouldn’t be &lt;em&gt;marketable&lt;/em&gt; in the software world without side projects, it was just relaxing seeing that nothing wrong happened when I chose to give priority to my family and my day work for almost a year.&lt;/p&gt;
&lt;p&gt;It was ok to drop out coding for a while. If you like it as much as you think you do, retaking it will be easy.&lt;/p&gt;</content:encoded></item></channel></rss>