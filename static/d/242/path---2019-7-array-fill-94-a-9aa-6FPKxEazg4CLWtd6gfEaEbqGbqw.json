{"data":{"site":{"siteMetadata":{"title":"Pedro's Tech Blog","author":"Pedro Marquez"}},"markdownRemark":{"id":"4c838c2d-34f3-5da3-bee4-07ae9e3f841d","excerpt":"I was using JavaScript for completing some Leetcode challenges and I got some pretty weird behavior. I tried to create a matrix (a two-dimension array, or arrayâ€¦","html":"<p>I was using JavaScript for completing some Leetcode challenges and I got some pretty weird behavior.</p>\n<p>I tried to create a matrix (a two-dimension array, or array of arrays), initialize it with <code class=\"language-text\">false</code> and then use it in some backtracking problem. I did something like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">// Initialize a 3x4 matrix with &quot;false&quot; values.\nconst matrix = Array(3).fill(Array(4).fill(false));\n\n// some stringify to capture the actual values at this point of the execution\nconsole.log(JSON.stringify(matrix));\n\n// set middle value to true\nmatrix[1][1] = true;\n\nconsole.log(JSON.stringify(matrix));</code></pre></div>\n<p>And my console prints this:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">[[false,false,false,false],\n [false,false,false,false],\n [false,false,false,false]]\n\n[[false,true,false,false],\n [false,true,false,false],\n [false,true,false,false]]</code></pre></div>\n<p>Wait, what? If I only set the value at 1,1 to <strong>true</strong>, why am I getting changed values in the whole column?</p>\n<p>Well, this is because the parameter passed to <code class=\"language-text\">Array.fill()</code> is not really a callback. It only gets evaluated once, and its used for filling all the elements in the array.</p>\n<p>So, in this case, we have only two arrays. The array <code class=\"language-text\">A</code> (<code class=\"language-text\">Array(3)</code>), which has 3 elements, and array <code class=\"language-text\">B</code> (<code class=\"language-text\">Array(4)</code>) which has 4 elements. </p>\n<p><code class=\"language-text\">Array(4)</code> creates array <code class=\"language-text\">B</code>, and <code class=\"language-text\">B</code> is passed as parameter to the <code class=\"language-text\">Array(3).fill(B)</code>.</p>\n<p>To be clearer, this is what we are actually doing, broken into more steps:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">const B = Array(4).fill(false);\nconst A = Array(3).fill(B);\nconst matrix = A;</code></pre></div>","frontmatter":{"title":"Weird behavior for matrix created with Array.fill()","date":"July 04, 2019","description":"I tried to initialize a two-dimension array with Array.fill() and now weird stuff is happening when I use it. Why??"}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2019/7/array-fill/","previous":{"fields":{"slug":"/2019/6/html-chunking/"},"frontmatter":{"title":"Streaming HTML responses"}},"next":null}}